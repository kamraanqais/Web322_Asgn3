<%- include('partials/header', { title: 'Add Task' }) %>

<div class="card">
    <h2>Add New Task</h2>

    <% if (typeof errors !== 'undefined' && errors && errors.length > 0) { %>
        <div style="color: red; background: #f8d7da; padding: 12px; border-radius: 8px; margin: 15px 0; border: 1px solid #f5c6cb;">
            <% errors.forEach(err => { %>
                <div><%= err.msg || err %></div>
            <% }) %>
        </div>
    <% } %>

    <form method="POST" action="/tasks/add">
        <input 
            type="text" 
            name="title" 
            placeholder="Task Title" 
            class="form-control" 
            value="<%= typeof taskData !== 'undefined' ? taskData.title || '' : '' %>" 
            required 
            minlength="3"
        >
        <textarea 
            name="description" 
            placeholder="Description (optional)" 
            class="form-control" 
            rows="3"
        ><%= typeof taskData !== 'undefined' ? taskData.description || '' : '' %></textarea>
        <input 
            type="date" 
            name="dueDate" 
            class="form-control" 
            value="<%= typeof taskData !== 'undefined' && taskData.dueDate ? new Date(taskData.dueDate).toISOString().split('T')[0] : '' %>"
        >
        <div style="margin-top: 20px; display: flex; gap: 12px; justify-content: center;">
            <button type="submit" class="btn btn-primary">Add Task</button>
            <a href="/tasks" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
